const canvax={_imageCache:{},_isElement:a=>{try{return a instanceof HTMLElement}catch(b){return'object'==typeof a&&a.hasOwnProperty('nodeType')}},_pointDistance:(a,b)=>{return Math.sqrt(Math.pow(Math.abs(a[0]-b[0]),2)+Math.pow(Math.abs(a[1]-b[1]),2))},_renderEntityToCanvas:(a,b)=>{var c=a.ctx;switch(c.save(),b.type){case'Rectangle':'none'!==b.backgroundColor&&(c.fillStyle=b.backgroundColor,c.fillRect(b.x,b.y,b.width,b.height)),'0'!==b.borderWeight&&'none'!==b.borderColor&&(c.strokeStyle=b.borderColor,c.lineWidth=b.borderWeight,c.strokeRect(b.x,b.y,b.width,b.height));break;case'Circle':c.beginPath(),c.arc(b.x,b.y,b.radius,0,2*Math.PI,!1),'none'!==b.backgroundColor&&(c.fillStyle=b.backgroundColor,c.fill()),'0'!==b.borderWeight&&'none'!==b.borderColor&&(c.strokeStyle=b.borderColor,c.lineWidth=b.borderWeight,c.stroke());break;case'Ellipse':var d=.5522847493,e=b.width/2*d,f=b.height/2*d,g=b.x+b.width,h=b.y+b.height,j=b.x+b.width/2,k=b.y+b.height/2;c.beginPath(),c.moveTo(b.x,k),c.bezierCurveTo(b.x,k-f,j-e,b.y,j,b.y),c.bezierCurveTo(j+e,b.y,g,k-f,g,k),c.bezierCurveTo(g,k+f,j+e,h,j,h),c.bezierCurveTo(j-e,h,b.x,k+f,b.x,k),c.closePath(),'none'!==b.backgroundColor&&(c.fillStyle=b.backgroundColor,c.fill()),'0'!==b.borderWeight&&'none'!==b.borderColor&&(c.strokeStyle=b.borderColor,c.lineWidth=b.borderWeight,c.stroke());break;case'Image':if(c.rotate(b.rotation*Math.PI/180),canvax._imageCache.hasOwnProperty(b.source))var l=canvax._imageCache[b.source];else{var l=new Image;l.src=b.source,canvax._imageCache[b.source]=l}c.drawImage(l,b.x,b.y,b.width,b.height);break;case'Text':c.fillStyle=b.color,c.font=b.font,c.textAlign=b.alignment,c.fillText(b.text,b.x,b.y,b.maxWidth);break;case'CustomEntity':b.entityMethod(c,b.properties);break;default:}c.restore()},_renderEntitiesToCanvas:(a,b)=>{for(let c=0;c<b.length;c++)canvax._renderEntityToCanvas(a,b[c])},_clearCanvas:(a,b)=>{a.ctx.clearRect(0,0,b.width,b.height)},Renderer:function(a,b){if(canvax._isElement(a)&&a.getContext)this.entities=[],this.element=a,this.ctx=a.getContext('2d'),this.add=c=>{this.entities.push(c)},this.clear=()=>{this.entities=[]},this.render=()=>{canvax._clearCanvas(this,this.element),canvax._renderEntitiesToCanvas(this,this.entities),this._fpsCount++},this._fpsCount=0,this.fps=0,b&&(this._autoRenderFrame=()=>{this.render(),window.requestAnimationFrame(this._autoRenderFrame)},this._autoRenderFrame()),setInterval(()=>{this.fps=5*this._fpsCount,this._fpsCount=0},200);else throw new Error('element is not a canvas element.')},Rectangle:function(a,b,c,d,e,f,g){if('undefined'!=typeof a&&'undefined'!=typeof b&&'undefined'!=typeof c&&'undefined'!=typeof d)this.type='Rectangle',this.x=a,this.y=b,this.width=c,this.height=d,this.backgroundColor=e||'none',this.borderColor=f||'#000000',this.borderWeight=g||'0px',this.setPosition=(h,j)=>{this.x=h,this.y=j},this.setSize=(h,j)=>{this.width=h,this.height=j},this.getBounds=()=>{return{l:this.x-this.width/2,t:this.y+this.height/2,r:this.x+this.width/2,b:this.y-this.height/2}};else throw new Error('Missing position parameter.')},Circle:function(a,b,c,d,e,f){if('undefined'!=typeof a&&'undefined'!=typeof b&&'undefined'!=typeof c)this.type='Circle',this.x=a,this.y=b,this.radius=c,this.backgroundColor=d||'none',this.borderColor=e||'#000000',this.borderWeight=f||'0px',this.setPosition=(g,h)=>{this.x=g,this.y=h},this.getBounds=()=>{var g=this.radius/2;return{l:this.x-g,t:this.y+g,r:this.x+g,b:this.y-g}};else throw new Error('Missing position parameter.')},Ellipse:function(a,b,c,d,e,f,g){if('undefined'!=typeof a&&'undefined'!=typeof b&&'undefined'!=typeof c&&'undefined'!=typeof d)this.type='Ellipse',this.x=a,this.y=b,this.width=c,this.height=d,this.backgroundColor=e||'none',this.borderColor=f||'#000000',this.borderWeight=g||'0px',this.setPosition=(h,j)=>{this.x=h,this.y=j},this.setSize=(h,j)=>{this.width=h,this.height=j},this.getBounds=()=>{return{l:this.x-this.width/2,t:this.y+this.height/2,r:this.x+this.width/2,b:this.y-this.height/2}};else throw new Error('Missing position parameter.')},Image:function(a,b,c,d,e,f){if('undefined'!=typeof a&&'undefined'!=typeof b&&'undefined'!=typeof c&&'undefined'!=typeof d&&e)this.type='Image',this.x=a,this.y=b,this.width=c,this.height=d,this.source=e,this.rotation=f||0,this.setPosition=(g,h)=>{this.x=g,this.y=h},this.setSize=(g,h)=>{this.width=g,this.height=h},this.getBounds=()=>{return{l:this.x,t:this.y,r:this.x+this.width,b:this.y-this.height}};else throw new Error('Missing required Image configuration parameter.')},Text:function(a,b,c,d,e,f,g){if('undefined'!=typeof a&&'undefined'!=typeof b&&'undefined'!=typeof c)this.type='Text',this.x=a,this.y=b,'none'!==g&&(this.maxWidth=g),this.font=d||'30px Arial',this.text=c,this.alignment=f||'start',this.color=e||'#000000',this.setPosition=(h,j)=>{this.x=h,this.y=j};else throw new Error('Missing required Text configuration parameter.')},Entity:function(a,b){if(a)this.type='CustomEntity',this.entityMethod=a,this.properties=b||{};else throw new Error('Missing entity method.')}};