'use strict';var _createClass=function(){function c(d,e){for(var g,f=0;f<e.length;f++)g=e[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}return function(d,e,f){return e&&c(d.prototype,e),f&&c(d,f),d}}();function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError('Cannot call a class as a function')}var canvax={Renderer:function(){function c(d){var f=this,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,c),this.element=d,this.ctx=this.element.getContext('2d'),this.entities=[],e&&(this._repeatRender=function(){f.render(),window.requestAnimationFrame(f._repeatRender)},this._repeatRender())}return _createClass(c,[{key:'render',value:function render(){this._clearCanvas();for(var d=0;d<this.entities.length;d++)this.entities[d].render(this.ctx)}},{key:'add',value:function add(d){this.entities.push(d)}},{key:'clear',value:function clear(){this.entities=[]}},{key:'_clearCanvas',value:function _clearCanvas(){this.ctx.clearRect(0,0,this.element.width,this.element.height)}}]),c}(),Rectangle:function(){function c(d){_classCallCheck(this,c),this.type='rectangle',Object.assign(this,{x:0,y:0,width:100,height:100,backgroundColor:'#3498DB',borderColor:'#E74C3C',borderWeight:5},d)}return _createClass(c,[{key:'render',value:function render(d){'string'==typeof this.backgroundColor&&(d.fillStyle=this.backgroundColor,d.fillRect(this.x,this.y,this.width,this.height)),'string'==typeof this.borderColor&&(d.strokeStyle=this.borderColor,d.lineWidth=this.borderWeight,d.strokeRect(this.x,this.y,this.width,this.height))}},{key:'getBounds',value:function getBounds(){return{l:this.x,t:this.y,r:this.x+this.width,b:this.y-this.height}}},{key:'touches',value:function touches(d){if('rectangle'===d.type||'image'===d.type){var e=this.getBounds(),f=d.getBounds();return e.l<f.r&&e.r>f.l&&e.t>f.b&&e.b<f.t}if('circle'===d.type){var g=d.x-Math.max(this.x,Math.min(d.x,this.x+this.width)),h=d.y-Math.max(this.y,Math.min(d.y,this.y+this.height));return Math.pow(g,2)+Math.pow(h,2)<Math.pow(d.radius,2)}throw new Error('Cannot check touches for type '+d.type+'.')}}]),c}(),Circle:function(){function c(d){_classCallCheck(this,c),this.type='circle',Object.assign(this,{x:0,y:0,radius:100,backgroundColor:'#3498DB',borderColor:'#E74C3C',borderWeight:5},d)}return _createClass(c,[{key:'render',value:function render(d){d.beginPath(),d.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),'string'==typeof this.backgroundColor&&(d.fillStyle=this.backgroundColor,d.fill()),'string'==typeof this.borderColor&&(d.strokeStyle=this.borderColor,d.lineWidth=this.borderWeight,d.stroke())}},{key:'touches',value:function touches(d){if('circle'===d.type)return this._pointDistance([this.x,this.y],[d.x,d.y])<this.radius+d.radius;if('rectangle'===d.type||'image'===d.type){var e=this.x-Math.max(d.x,Math.min(this.x,d.x+d.width)),f=this.y-Math.max(d.y,Math.min(this.y,d.y+d.height));return Math.pow(e,2)+Math.pow(f,2)<Math.pow(this.radius,2)}throw new Error('Cannot check touches for type '+d.type+'.')}},{key:'_pointDistance',value:function _pointDistance(d,e){return Math.sqrt(Math.pow(Math.abs(d[0]-e[0]),2)+Math.pow(Math.abs(d[1]-e[1]),2))}}]),c}(),Text:function(){function c(d){_classCallCheck(this,c),this.type='text',Object.assign(this,{x:0,y:0,text:'',color:'#000000',font:'30px Arial'},d)}return _createClass(c,[{key:'render',value:function render(d){d.fillStyle=this.color,d.font=this.font,d.textAlign=this.alignment,d.fillText(this.text,this.x,this.y,this.maxWidth)}},{key:'touches',value:function touches(){throw new Error('Cannot check touches for type '+this.type+'.')}}]),c}(),Image:function(){function c(d){_classCallCheck(this,c),this.type='image',this._imageCache={},Object.assign(this,{x:0,y:0,source:''},d)}return _createClass(c,[{key:'render',value:function render(d){var f=this;d.rotate(this.rotation*Math.PI/180);var e;if(this._imageCache.hasOwnProperty(this.source)){if(!1===this._imageCache[this.source])return;e=this._imageCache[this.source],d.drawImage(e,this.x,this.y,this.width,this.height)}else this._imageCache[this.source]=!1,e=new window.Image,e.src=this.source,e.onload=function(){f._imageCache[f.source]=e,d.drawImage(e,f.x,f.y,f.width,f.height)}}},{key:'getBounds',value:function getBounds(){return{l:this.x,t:this.y,r:this.x+this.width,b:this.y-this.height}}},{key:'touches',value:function touches(d){if('rectangle'===d.type||'image'===d.type){var e=this.getBounds(),f=d.getBounds();return!(e.t<f.b||e.b>f.t||e.r<f.l||e.l>f.r)}if('circle'===d.type){var g=d.x-Math.max(this.x,Math.min(d.x,this.x+this.width)),h=d.y-Math.max(this.y,Math.min(d.y,this.y+this.height));return Math.pow(g,2)+Math.pow(h,2)<Math.pow(d.radius,2)}throw new Error('Cannot check touches for type '+d.type+'.')}}]),c}(),Ellipse:function(){function c(d){_classCallCheck(this,c),this.type='ellipse',Object.assign(this,{x:0,y:0,width:100,height:100,backgroundColor:'#3498DB',borderColor:'#E74C3C',borderWeight:5},d)}return _createClass(c,[{key:'render',value:function render(d){var e=.5522847493,f=this.width/2*e,g=this.height/2*e,h=this.x+this.width,j=this.y+this.height,k=this.x+this.width/2,l=this.y+this.height/2;d.beginPath(),d.moveTo(this.x,l),d.bezierCurveTo(this.x,l-g,k-f,this.y,k,this.y),d.bezierCurveTo(k+f,this.y,h,l-g,h,l),d.bezierCurveTo(h,l+g,k+f,j,k,j),d.bezierCurveTo(k-f,j,this.x,l+g,this.x,l),d.closePath(),'string'==typeof this.backgroundColor&&(d.fillStyle=this.backgroundColor,d.fill()),'string'==typeof this.borderColor&&(d.strokeStyle=this.borderColor,d.lineWidth=this.borderWeight,d.stroke())}},{key:'getBounds',value:function getBounds(){return{l:this.x-this.width/2,t:this.y+this.height/2,r:this.x+this.width/2,b:this.y-this.height/2}}},{key:'touches',value:function touches(){throw new Error('Cannot check touches for type '+this.type+'.')}}]),c}()};